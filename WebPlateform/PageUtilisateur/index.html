<!DOCTYPE html>
<html lang="fr" dir="ltr">
    <head>
        <meta charset="utf-8">
        <title>BCR - Page Utilisateur</title>

        <link rel="stylesheet" type="text/css" href="style.css">
        <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">
        <script src="http://code.jquery.com/jquery-1.12.0.min.js"></script>
        <script src="../jquery/jquery-3.3.1.js"></script>
        <!-- <script type="text/javascript" src="https://weareoutman.github.io/clockpicker/assets/js/bootstrap.min.js"></script> -->
        <script type="text/javascript" src="http://weareoutman.github.io/clockpicker/dist/bootstrap-clockpicker.min.js"></script>
        <link rel="stylesheet" type="text/css" href="http://weareoutman.github.io/clockpicker/dist/bootstrap-clockpicker.min.css">
        <!-- <script type="text/javascript" src="http://weareoutman.github.io/clockpicker/assets/js/highlight.min.js"></script> -->

    </head>

    <body>
    </body>

    <script>
        var tabUsers= [[0, 0000, "David", "Auger", "https://image.flaticon.com/icons/svg/180/180644.svg"],
                    [1, 0001, "Martin", "Renaud", "https://image.flaticon.com/icons/svg/206/206897.svg"],
                    [2, 0002, "François", "Bossard", "https://image.flaticon.com/icons/svg/206/206900.svg"],
                    [3, 0003, "Nathan", "Bourgeois", "https://image.flaticon.com/icons/svg/206/206861.svg"]];

        var tabAlarm = [[9, 30, 1, 1, "réveil matin"],
                    [9, 30, 2, 1, "réveil matin"],
                    [9, 32, 2, 0, ""],
                    [10, 30, 3, 0, ""]];

        // ============= Fonctions ==================== //
        function orderAlarm() {
            // TODO: faire la fonction de tri des alarmes du tableau pour les afficher
        }

        // =========================================== //

        var $page = $("<div>").addClass("page")
            .appendTo("body");

        var $userCard = $("<div>").addClass("userCard")
            .appendTo(".page");

        var $contentCard = $("<div>").addClass("contentCard")
            .appendTo($userCard);

        // ---------- Sous-enfants de contentCard ----------
        //Post MainInfo
        var $postMain = $("<div>").addClass("post mainInfo")
            .appendTo($contentCard);

        var $leftPart = $("<div>").addClass("leftPart")
            .appendTo($postMain);

        var $userPic = $("<div>").addClass("userPic")
            .appendTo($leftPart);

        var $imgUser = $("<img>")
            // .attr("src", "https://image.flaticon.com/icons/svg/180/180644.svg")
            .attr("src", tabUsers[0][4])
            .attr("alt", "Avatar de l'utilisateur")
            .appendTo($userPic);

        var $rightPart = $("<div>").addClass("rightPart")
            .appendTo($postMain);

        var $userHeader = $("<div>").addClass("userHeader")
            .append(
                $("<label>").addClass("userHeaderTitle")
                    .text("Profil de l'utilisateur")
            )
            .appendTo($rightPart);

        var $btnModify = $("<div>").addClass("btnModify")
            .appendTo($userHeader)
            .append(
                $("<i>").addClass("material-icons")
                    .attr("aria-hidden", "true")
                    .text("mode_edit")
            )
            .on("click", function() {
                // TODO: faire la fonction qui affiche que c'est pour plus tard
            });

        var $userBody = $("<div>").addClass("userBody")
            .appendTo($rightPart);

        var $userName = $("<div>").addClass("userName")
            .appendTo($userBody);

        var $userFirstName = $("<div>").addClass("firstName")
            .text(tabUsers[0][2])
            .appendTo($userName);

        var $userLastName = $("<div>").addClass("lastName")
            .text(tabUsers[0][3])
            .appendTo($userName);

        var $postSecAlarm = $("<div>").addClass("post secAlarm")
            .appendTo($contentCard);


        // ====== Alarm Header ======
        var $alarmHeader = $("<div>").addClass("alarmHeader")
            .appendTo($postSecAlarm);

        var $alarmIcon = $("<div>").addClass("alarmIcon")
            .appendTo($alarmHeader);

        var $iconAlarm = $("<img>")
            .attr("src", "https://image.flaticon.com/icons/svg/212/212212.svg")
            .attr("alt", "Icone alarme")
            .appendTo($alarmIcon);

        var $alarmTitle = $("<div>").addClass("alarmTitle")
            .appendTo($alarmHeader);

        var $alarmLabelTitle = $("<label>").addClass("alarmLabelTitle")
            .text("Alarmes configurées :")
            .appendTo($alarmTitle);

        var $btnAddAlarm = $("<button>").addClass("btn-picto")
            .attr("type", "button")
            .attr("arial-label", "")
            .attr("title", "")
            .appendTo($alarmHeader)
            .on("click", function(){
                $alarmAddPanel.toggleClass('hidden');
            });
        // Panneau d'ajout d'une alarme
        var $alarmAddPanel = $("<div>").addClass("post alarmAddPanel hidden")
            .appendTo($postSecAlarm);

        var $alarmPanelHeader = $("<div>").addClass("alarmPanelHeader")
            .appendTo($alarmAddPanel);

        var $alarmPanelTitle = $("<div>").addClass("$alarmPanelTitle")
            .appendTo($alarmPanelHeader);

        var $alarmPanelTitleLAbel = $("<label>").addClass("alarmPanelLabel")
            .text("Ajout d'une nouvelle alarme :")
            .appendTo($alarmPanelTitle);

        var $alarmPanelBody = $("<div>").addClass("alarmPanelBody")
            .appendTo($alarmAddPanel);

        var $divInputGroup = $("<div>").addClass("inputGroup clockpicker")
            .appendTo($alarmPanelBody);

        var $inputTime = $("<input>").addClass("inputTime form-control")
            .attr("type", "text")
            .attr("value", "09:30")  // TODO: mettre l'heure actuelle
            .attr("name", "alarmTime")
            .appendTo($divInputGroup);
        // TODO: améliorer le CSS du datepicker
        $inputTime.clockpicker({
            autoclose: true
        });

        var $spanIconTime = $("<span>").addClass("inputGroupAddon")
            .append("<span class='glyphicon glyphicon-time'><i class='material-icons' aria-hidden='true'>access_time</i></span>")
            .appendTo($divInputGroup);

        var $divSelectDay = $("<div>").addClass("selectDay")
            .appendTo($alarmPanelBody);

        var weekDays = ["Lun", "Mar", "Mer", "Jeu", "Ven", "Sam", "Dim"];

        for (var i = 0; i < weekDays.length; i++) {
            $labelDay = $("<label>").addClass("labelDays")
                .text(weekDays[i])
                .val(i)
                .appendTo($divSelectDay)
                .on("click", function() {
                    // TODO: faire la focntion de sélection
                    console.log(weekDays[i]);
                })
        }

        var $alarmPanelFooter = $("<div>").addClass("alarmPanelFooter")
            .appendTo($alarmAddPanel);

        var $alarmBtnAction = $("<div>").addClass("alarmBtnAction")
            .appendTo($alarmPanelFooter);

        var $btnCancel = $("<button>").addClass("btn-picto")
            .attr("type", "button")
            .appendTo($alarmBtnAction)
            .on("click", function() {
                //On annule l'ajout donc on faire juste le panneau sans
                //sauvegarder quoi que ce soit
                $alarmAddPanel.toggleClass('hidden');
            });
        var $iCancel = $("<i>").addClass("material-icons")
            .attr("aria-hidden", "true")
            .text("cancel")
            .appendTo($btnCancel);

        var $btnSave = $("<button>").addClass("btn-picto")
            .attr("type", "button")
            .appendTo($alarmBtnAction)
            .on("click", function() {
                // TODO: faire fonction d'ajout d'alarme
            });
        var $iSave = $("<i>").addClass("material-icons")
            .attr("aria-hidden", "true")
            .text("check")
            .appendTo($btnSave);
        // == //


        var $iBtnAdd = $("<i>").addClass("material-icons")
            .attr("aria-hidden", "true")
            .text("alarm_add")
            .appendTo($btnAddAlarm);
        // ====== fin header ======

        // ====== Alarm Body ======
        var $alarmBody = $("<div>").addClass("alarmBody")
            .appendTo($postSecAlarm);

        var $alarmList = $("<div>").addClass("alarmList")
            .appendTo($alarmBody);

        var $ulList = $("<ul>").addClass("ulList")
            .appendTo($alarmList);

        for (var i = 0; i < tabAlarm.length; i++) {
            var $liAlarm = $("<li>").addClass("liAlarm")
                .appendTo($ulList);

            // ====== Infos de l'alarme ======
            var $alarmInfo = $("<div>").addClass("alarmIcon")
                .appendTo($liAlarm);

            var $alarmHour = $("<div>").addClass("alarmHour")
                .appendTo($alarmInfo);

            var $labelHour = $("<label>").addClass("alarmLabelHour")
                .appendTo($alarmHour)
                .text(tabAlarm[i][0]);

            var $alarmDays = $("<div>").addClass("alarmDays")
                .appendTo($alarmInfo);

            // ====== fin des infos ======

            // ====== Action sur l'alarme ======
            var $alarmAction = $("<div>").addClass("alarmAction")
                .appendTo($liAlarm);

            var $btnOn = $("<button>").addClass("btn-picto")
                .attr("type", "button")
                .appendTo($alarmAction)
                .on("click", function() {
                    // TODO: fonction permettant d'activer ou désactivé l'alarme
                });
            var $iAlarmOn = $("<i>").addClass("material-icons")
                .attr("aria-hidden", "true")
                .text("alarm_on")
                .appendTo($btnOn);

            var $btnDelete = $("<button>").addClass("btn-picto")
                .attr("type", "button")
                .attr("aria-label", "Delete")
                .attr("title", "Delete")
                .appendTo($alarmAction)
                .on("click", function(){
                    // TODO: faire la fonction de suppression de l'alarme
                });
            var $iDelete = $("<i>").addClass("material-icons")
                .attr("aria-hidden", "true")
                .text("delete")
                .appendTo($btnDelete);
            // ====== fin des actions ======
        }

    </script>
</html>
